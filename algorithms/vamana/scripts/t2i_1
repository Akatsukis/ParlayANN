# bash
NAME=t2i_10
BUILD_ARGS="-R 100 -L 200 -alpha 1 -num_passes 2 -quantize 8 -verbose"
QUERY_ARGS="-quantize 16 -quantize_build 1 -verbose"
TYPE_ARGS="-data_type float -dist_func mips -normalize -file_type bin"

PATH=data/$NAME
DATA_FILE=$PATH/base.fbin
QUERY_FILE=$PATH/query.fbin
GROUNDTRUTH_FILE=$PATH/groundtruth
GRAPH_FILE=$PATH/graphs/graph_10M

# build
# ./neighbors $BUILD_ARGS $TYPE_ARGS -base_path $DATA_FILE -graph_outfile $GRAPH_FILE

# query 
./neighbors $QUERY_ARGS $TYPE_ARGS -base_path $DATA_FILE -query_path $QUERY_FILE -gt_path $GROUNDTRUTH_FILE -graph_path $GRAPH_FILE

# numactl -i all ./neighbors -R 64 -L 128 -a 1.0 -alpha 1.0 -data_type float -file_type bin -dist_func mips -base_path data/text2image1B/base.1B.fbin.crop_nb_10000000 -query_path data/text2image1B/query.public.100K.fbin -gt_path data/text2image1B/text2image-10M -num_passes 2 -quantize 16 -quantize_build -graph_outfile data/text2image1B/graph10M
